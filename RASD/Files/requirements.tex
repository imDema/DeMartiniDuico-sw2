\subsection{External interface Requirements}

\emph{CLup} is a web application which can be accessed from web browsers.

\subsubsection{User interfaces}
\subsubsection{Hardware interfaces}
The \emph{CLup} client shall be available for devices capable of rendering a web page with javascript and internet access, this includes smartphones, tablets and personal computers.

Although not strictly required, the devices used by the staff should have a camera to scan QR codes

\subsubsection{Software interfaces}
\begin{itemize}
    \item \textbf{Web browser}: the applicative requires a web browser capable of rendering HTML5 web pages with Javascript
    \item \textbf{Maps service}: although not required for the core functionality, having access to a maps service on the device will improve user experience
\end{itemize}

\subsubsection{Communication interfaces}
\begin{itemize}
    \item \emph{User}: requires a internet connection in order to get a token. Access to the store can be done offline if necessary.
    \item \emph{Staff}: requires a internet connection in order to communicate with the server and validate tokens or emit substitute tickets.
\end{itemize}
The system shall use the HTTPS protocol to provide secure communication from the client to the server.
\subsection{Functional requirements}
\subsubsection{Scenarios}
\textbf{Scenario 1}

Maria is gathering ingredients to bake a cake, but she realizes she doesn't have any milk.
Maria lives near to a grocery shop so she opens the web app, she looks up the grocery and gets a ticket \todo{specifying she wants milk stuff}.
CLup shows that Maria's turn will be in about 10 minutes. Five minutes later she checks back on the app and the approximate time is now 5 minutes, so she leaves and she goes to the shop.
At the shop Giovanni, a memeber of the staff, is at the entrance waiting for customers. Maria is welcomed by Giovanni, she opens the application and \todo{(how she finds the token)} then she shows him the ticket, Giovanni scans the ticket with his phone, Maria is just in time, so she can enter the shop and do her groceries.
At the exit she is invited by Marco, another member of the staff to scan her ticket, she shows the ticket one last time, then she leaves the shop and returns home ready to bake a cake.

\subsubsection{Use cases}
% Use case name
% Find the actors (concrete names)
% Flow of events with natural language
% Focus on entry and exit condition
% Exceptions

\begin{table}[h]
    \begin{tabular}{|l|l|}
    \hline
    Name           & \todo{\#}    \\ \hline
    Actor          & \todo{\#} \\ \hline
    Entry codition & \todo{\#}   \\ \hline
    Event flow     & \todo{\#}    \\ \hline
    \end{tabular}
    \end{table}


\subsection{Performance Requirements}
\begin{itemize}
    \item Validating a token must be done as soon as possible and in no more than 5 seconds from when the token was acquired by the staff. This is required to achieve sufficient throughput and prevent queues from forming at the entrance.
    \item When obtaining a token the user shall receive a response from the server within 15 seconds, since in this case time is not critical.
    \item Tokens shall be added to the system as soon as possible within 30 seconds.
\end{itemize}
\subsection{Design constraints}
\subsubsection{Standards compliance}
The web server shall comply to the HTTPS\footnote{\href{https://tools.ietf.org/html/rfc2818}{RFC2818: HTTP Over TLS}} protocol and target the HTTP/2\footnote{\href{https://tools.ietf.org/html/rfc7540}{RFC7540: Hypertext Transfer Protocol Version 2 (HTTP/2)}} standard for communication and the HTML5\footnote{\href{https://www.w3.org/TR/2017/REC-html52-20171214/}{HTML 5.2 W3C Recommendation, 14 December 2017}} standard for web pages.

\subsubsection{Hardware limitations}
Running the app requires a smartphone that supports one of the modern web browser engines; older cellphones whose official support has been discontinued shall not be supported.
To allow the validation of tickets by the Third Party Staff, the device should also be equipped with a camera of any resolution above 8 Megapixel.
%\subsubsection{Other constraints}

\subsection{Software System Attributes}
\subsubsection{Reliability}
\textit{CLup} should be available 24/7 in order to allow Users to generate Tokens at any time of the day. Downtime due to maintenance shall be during the night and no longer than 2 hours, furthermore, users and third parties shall be notified at least 3 days prior the scheduled downtime.
\subsubsection{Availability}
\emph{CLup} does not have a critical nature, however any downtime could cause serious problems to the management of the entrances to Shops. Hence, 99\% availability during daytime is required for \emph{CLup} to be effective. At night time, the availability requirement can be relaxed to 95\%.
\subsubsection{Security}
All communication should be over HTTPS protocol to provide privacy, data integrity and authentication.
User passwords shall be stored in a salted hash format.
The system should keep thorough logs of the activity of logged in users and of login attempts. The registration and login procedure should not disclose informations about existing users and repeated login attempts shall be limited.
Further details about the cryptographic functions and protocols employed will be discussed in the Design Document.
\subsubsection{Maintainability}
The system components shall be realized with high modularity and orthogonality between modules. This allows modifications to the code to be localized and leave the other components unaffected, minimizing the time required to fix problems with the system.
The backend system shall be able to run a test instance of the service that can be used by developers to test out features before deploying them to the main instance.
\subsubsection{Portability}
\textit{Clup} should be easily deployable on a dedicated machine, on a virtual private server or on a cloud hosting service. The server should be able to run both natively and in a containerized environment for maximum portability.
